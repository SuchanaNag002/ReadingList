(this["webpackJsonpreading-list"]=this["webpackJsonpreading-list"]||[]).push([[0],{52:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var c=n(10),r=n.n(c),a=n(44),s=n.n(a),i=(n(52),n(31)),u=n(15),j=n(11),o=n(25),b=n(26),l=n(45),d=n(21);Object(l.a)({apiKey:"AIzaSyBU8DIVSqLOkfI61dxalGcUqzF1X711cPI",authDomain:"readlist-3d6a2.firebaseapp.com",projectId:"readlist-3d6a2",storageBucket:"readlist-3d6a2.appspot.com",messagingSenderId:"512409986442",appId:"1:512409986442:web:c7e64a10135fe6f3619473",measurementId:"G-T12LDLJ51T"});var O=Object(d.e)(),h=Object(b.b)(),p=n(9),x=Object(c.createContext)(),f=function(e,t){switch(t.type){case"LOGIN":return Object(o.a)(Object(o.a)({},e),{},{user:t.payload});case"LOGOUT":return Object(o.a)(Object(o.a)({},e),{},{user:null});case"AUTH_IS_READY":return{user:t.payload,authIsReady:!0};default:return e}},v=function(e){var t=e.children,n=Object(c.useReducer)(f,{user:null,authIsReady:!1}),r=Object(j.a)(n,2),a=r[0],s=r[1];return Object(c.useEffect)((function(){var e=Object(b.c)(h,(function(t){s({type:"AUTH_IS_READY",payload:t}),e()}))}),[]),console.log("AuthContext state:",a),Object(p.jsx)(x.Provider,{value:Object(o.a)(Object(o.a)({},a),{},{dispatch:s}),children:t})},g=function(){var e=Object(c.useContext)(x);if(!e)throw Error("useAuthContext must be used inside an AuthContextProvider");return e};function m(){var e=function(){var e=g().dispatch;return{logout:function(){Object(b.e)(h).then((function(){e({type:"LOGOUT"})})).catch((function(e){console.log(e.message)}))}}}().logout;return Object(p.jsxs)("nav",{children:[Object(p.jsx)("h1",{children:"My Reading List"}),Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:Object(p.jsx)(i.b,{to:"/",children:"Home"})}),Object(p.jsx)("li",{children:Object(p.jsx)(i.b,{to:"/login",children:"Login"})}),Object(p.jsx)("li",{children:Object(p.jsx)(i.b,{to:"/signup",children:"Signup"})}),Object(p.jsx)("li",{onClick:e,children:"Logout"})]})]})}var y=n(0),S=n.n(y),I=n(1);function k(e){var t=e.books,n=function(){var e=Object(I.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(d.d)(O,"books",t),e.next=3,Object(d.c)(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"book-list",children:Object(p.jsx)("ul",{children:t.map((function(e){return Object(p.jsx)("li",{onClick:function(){return n(e.id)},children:e.title},e.id)}))})})}function w(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],r=t[1],a=g().user,s=function(){var e=Object(I.a)(S.a.mark((function e(t){var c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=Object(d.b)(O,"books"),e.next=4,Object(d.a)(c,{title:n,uid:a.uid});case 4:r("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("form",{onSubmit:s,children:[Object(p.jsxs)("label",{children:[Object(p.jsx)("span",{children:"Add a new book title:"}),Object(p.jsx)("input",{required:!0,type:"text",onChange:function(e){return r(e.target.value)},value:n})]}),Object(p.jsx)("button",{children:"Add"})]})}function A(){var e=function(e,t){var n=g().user,r=Object(c.useState)(null),a=Object(j.a)(r,2),s=a[0],i=a[1],u=Object(c.useRef)(t).current;return Object(c.useEffect)((function(){var t=Object(d.b)(O,e);u&&(t=Object(d.g)(t,Object(d.h)("uid","==",n.uid)));var c=Object(d.f)(t,(function(e){var t=[];e.docs.forEach((function(e){t.push(Object(o.a)({id:e.id},e.data()))})),i(t)}));return function(){return c()}}),[e,u,n.uid]),{documents:s}}("books",["uid","==",g().user.id]),t=e.documents;return Object(p.jsxs)("div",{className:"App",children:[t&&Object(p.jsx)(k,{books:t}),Object(p.jsx)(w,{})]})}function C(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(j.a)(a,2),i=s[0],u=s[1],o=function(){var e=Object(c.useState)(null),t=Object(j.a)(e,2),n=t[0],r=t[1],a=g().dispatch;return{error:n,login:function(e,t){r(null),Object(b.d)(h,e,t).then((function(e){a({type:"LOGIN",payload:e.user})})).catch((function(e){r(e.message)}))}}}(),l=o.error,d=o.login;return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Login"}),Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),d(n,i)},children:[Object(p.jsxs)("label",{children:[Object(p.jsx)("span",{children:"email:"}),Object(p.jsx)("input",{required:!0,type:"email",onChange:function(e){return r(e.target.value)},value:n})]}),Object(p.jsxs)("label",{children:[Object(p.jsx)("span",{children:"password:"}),Object(p.jsx)("input",{required:!0,type:"password",onChange:function(e){return u(e.target.value)},value:i})]}),Object(p.jsx)("button",{children:"log in"}),l&&Object(p.jsx)("p",{children:l})]})]})}function L(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(j.a)(a,2),i=s[0],u=s[1],o=function(){var e=Object(c.useState)(null),t=Object(j.a)(e,2),n=t[0],r=t[1],a=g().dispatch;return{error:n,signup:function(e,t){r(null),Object(b.a)(h,e,t).then((function(e){a({type:"LOGIN",payload:e.user})})).catch((function(e){r(e.message)}))}}}(),l=o.error,d=o.signup;return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Signup"}),Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),d(n,i)},children:[Object(p.jsxs)("label",{children:[Object(p.jsx)("span",{children:"email:"}),Object(p.jsx)("input",{required:!0,type:"email",onChange:function(e){return r(e.target.value)},value:n})]}),Object(p.jsxs)("label",{children:[Object(p.jsx)("span",{children:"password:"}),Object(p.jsx)("input",{required:!0,type:"password",onChange:function(e){return u(e.target.value)},value:i})]}),Object(p.jsx)("button",{children:"sign up"}),l&&Object(p.jsx)("p",{children:l})]})]})}var D=function(){var e=g(),t=e.user,n=e.authIsReady;return Object(p.jsx)("div",{className:"App",children:n&&Object(p.jsxs)(i.a,{children:[Object(p.jsx)(m,{}),Object(p.jsxs)(u.d,{children:[Object(p.jsxs)(u.b,{exact:!0,path:"/",children:[t&&Object(p.jsx)(A,{}),!t&&Object(p.jsx)(u.a,{to:"/login"})]}),Object(p.jsxs)(u.b,{path:"/signup",children:[!t&&Object(p.jsx)(L,{}),t&&Object(p.jsx)(u.a,{to:"/"})]}),Object(p.jsxs)(u.b,{path:"/login",children:[!t&&Object(p.jsx)(C,{}),t&&Object(p.jsx)(u.a,{to:"/"})]})]})]})})};s.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(v,{children:Object(p.jsx)(D,{})})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.120f7f56.chunk.js.map