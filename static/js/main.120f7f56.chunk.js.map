{"version":3,"sources":["firebase/config.js","context/AuthContext.js","hooks/useAuthContext.js","components/Navbar.js","hooks/useLogout.js","hooks/useCollection.js","components/BookList.js","components/BookForm.js","pages/Home.js","pages/Login.js","hooks/useLogin.js","pages/Signup.js","hooks/useSignup.js","App.js","index.js"],"names":["initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getFirestore","auth","getAuth","AuthContext","createContext","authReducer","state","action","type","user","payload","authIsReady","AuthContextProvider","children","useReducer","dispatch","useEffect","unsub","onAuthStateChanged","console","log","Provider","value","useAuthContext","context","useContext","Error","Navbar","logout","signOut","then","catch","err","message","useLogout","to","onClick","BookList","books","handleClick","id","ref","doc","deleteDoc","className","map","book","title","BookForm","useState","newBook","setNewBook","handleSubmit","e","preventDefault","collection","addDoc","uid","onSubmit","required","onChange","target","Home","c","_q","documents","setDocuments","q","useRef","current","query","where","unsubscribe","onSnapshot","snapshot","results","docs","forEach","push","data","useCollection","Login","email","setEmail","password","setPassword","error","setError","login","signInWithEmailAndPassword","res","useLogin","Signup","signup","createUserWithEmailAndPassword","useSignup","App","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.120f7f56.chunk.js","sourcesContent":["import {initializeApp} from 'firebase/app'\r\nimport {getFirestore} from 'firebase/firestore'\r\nimport {getAuth} from 'firebase/auth'\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyBU8DIVSqLOkfI61dxalGcUqzF1X711cPI\",\r\n  authDomain: \"readlist-3d6a2.firebaseapp.com\",\r\n  projectId: \"readlist-3d6a2\",\r\n  storageBucket: \"readlist-3d6a2.appspot.com\",\r\n  messagingSenderId: \"512409986442\",\r\n  appId: \"1:512409986442:web:c7e64a10135fe6f3619473\",\r\n  measurementId: \"G-T12LDLJ51T\"\r\n};\r\n\r\n//init firebase\r\ninitializeApp(firebaseConfig)\r\n\r\n//init firestore\r\nconst db=getFirestore()\r\n\r\n//init firebase auth\r\nconst auth=getAuth()\r\n\r\nexport {db,auth}","import { createContext, useReducer, useEffect } from 'react'\nimport { onAuthStateChanged } from 'firebase/auth'\nimport { auth } from '../firebase/config'\nexport const AuthContext = createContext()\n\nexport const authReducer = (state, action) => {\n  switch (action.type) {\n    case 'LOGIN':\n      return { ...state, user: action.payload }\n    case 'LOGOUT':\n      return { ...state, user: null }\n    case 'AUTH_IS_READY':\n      return { user: action.payload, authIsReady: true }\n    default:\n      return state\n  }\n}\n\nexport const AuthContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(authReducer, { \n    user: null,\n    authIsReady: false\n  })\n\n  useEffect(() => {\n    const unsub = onAuthStateChanged(auth,user => {\n      dispatch({ type: 'AUTH_IS_READY', payload: user })\n      unsub()\n    })\n  }, [])\n\n  console.log('AuthContext state:', state)\n  \n  return (\n    <AuthContext.Provider value={{ ...state, dispatch }}>\n      { children }\n    </AuthContext.Provider>\n  )\n\n}","import { AuthContext } from \"../context/AuthContext\"\nimport { useContext } from \"react\"\n\nexport const useAuthContext = () => {\n  const context = useContext(AuthContext)\n\n  if(!context) {\n    throw Error('useAuthContext must be used inside an AuthContextProvider')\n  }\n\n  return context\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useLogout } from '../hooks/useLogout'\r\n\r\nexport default function Navbar() {\r\n  const {logout}=useLogout()\r\n  return (\r\n    <nav>\r\n      <h1>My Reading List</h1>\r\n      <ul>\r\n        <li><Link to=\"/\">Home</Link></li>\r\n        <li><Link to=\"/login\">Login</Link></li>\r\n        <li><Link to=\"/signup\">Signup</Link></li>\r\n        <li onClick={logout}>Logout</li>\r\n      </ul>\r\n    </nav>\r\n  )\r\n}\r\n","import {useAuthContext} from \"../hooks/useAuthContext\"\r\n//firebase imports\r\nimport {auth} from '../firebase/config'\r\nimport { signOut } from 'firebase/auth'\r\n\r\nexport const useLogout=()=>{\r\n    const {dispatch}=useAuthContext()\r\n    const logout=()=>{\r\n        signOut(auth).then(()=>{\r\n            dispatch({type:'LOGOUT'})\r\n        }).catch((err)=>{\r\n            console.log(err.message)\r\n        })\r\n    }\r\n    return {logout}\r\n}\r\n","import { useState, useEffect, useRef} from \"react\";\r\nimport { db } from \"../firebase/config\";\r\nimport { useAuthContext } from \"./useAuthContext\";\r\n\r\n//firebase imports\r\nimport {collection, onSnapshot, query, where} from 'firebase/firestore'\r\n\r\nexport const useCollection=(c,_q)=>{\r\n    const {user}=useAuthContext();\r\n    const [documents, setDocuments]=useState(null)\r\n    //set up query\r\n    const q=useRef(_q).current\r\n    useEffect(()=>{\r\n        \r\n        let ref=collection(db,c)\r\n        if(q){\r\n           ref=query(ref,where(\"uid\",\"==\",user.uid))\r\n        }\r\n        const unsubscribe=onSnapshot(ref,(snapshot)=>{\r\n            let results=[]\r\n            snapshot.docs.forEach(doc=>{\r\n                results.push({id:doc.id,...doc.data()})\r\n            })\r\n            setDocuments(results)\r\n        })\r\n        return()=>unsubscribe()\r\n    },[c,q,user.uid])\r\n    return {documents}\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","//firebase\r\nimport { db } from \"../firebase/config\"\r\nimport { doc, deleteDoc } from \"firebase/firestore\"\r\nexport default function BookList({ books }) {\r\n    const handleClick=async(id)=>{\r\n      const ref=doc(db,'books',id)\r\n      await deleteDoc(ref)\r\n    }\r\n    return (\r\n      <div className=\"book-list\">\r\n        <ul>\r\n          {books.map(book => (\r\n            <li key={book.id} onClick={() => handleClick(book.id)}>{book.title}</li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    )\r\n  \r\n}","import { useState } from \"react\";\r\nimport { useAuthContext } from \"../hooks/useAuthContext\";\r\n//firebase imports\r\nimport { db } from \"../firebase/config\";\r\nimport { collection, addDoc } from \"firebase/firestore\";\r\n\r\nexport default function BookForm() {\r\n  const [newBook, setNewBook] = useState(\"\");\r\n  const {user}=useAuthContext();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const ref = collection(db, \"books\");\r\n    await addDoc(ref, { \r\n      title: newBook,\r\n      uid: user.uid\r\n    });\r\n    setNewBook(\"\");\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <label>\r\n        <span>Add a new book title:</span>\r\n        <input\r\n          required\r\n          type=\"text\"\r\n          onChange={(e) => setNewBook(e.target.value)}\r\n          value={newBook}\r\n        />\r\n      </label>\r\n      <button>Add</button>\r\n    </form>\r\n  );\r\n}\r\n","import { useCollection } from '../hooks/useCollection';\r\nimport BookList from '../components/BookList'\r\nimport BookForm from '../components/BookForm'\r\nimport { useAuthContext } from '../hooks/useAuthContext';\r\n\r\nexport default function Home() {\r\n  const {user}=useAuthContext()\r\n  const {documents:books}=useCollection(\r\n    'books',\r\n    ['uid','==',user.id]\r\n    )\r\n  return (\r\n    <div className=\"App\">\r\n      {books && <BookList books={books} />}\r\n      <BookForm />\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from 'react'\r\nimport { useLogin } from '../hooks/useLogin'\r\n\r\nexport default function Login() {\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const {error,login}=useLogin()\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    //console.log(email, password)\r\n    login(email,password)\r\n  }\r\n  \r\n  return (\r\n    <div>\r\n      <h2>Login</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <label>\r\n          <span>email:</span>\r\n          <input\r\n            required\r\n            type=\"email\"\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            value={email}\r\n          />\r\n        </label>\r\n        <label>\r\n          <span>password:</span>\r\n          <input\r\n            required\r\n            type=\"password\"\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            value={password}\r\n          />\r\n        </label>\r\n        <button>log in</button>\r\n        {error && <p>{error}</p>}\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n","import {useState} from 'react'\r\nimport {useAuthContext} from \"../hooks/useAuthContext\"\r\n//firebase imports\r\nimport {auth} from '../firebase/config'\r\nimport { signInWithEmailAndPassword } from \"firebase/auth\"\r\n\r\nexport const useLogin=()=>{\r\n    const [error,setError]=useState(null)\r\n    const {dispatch}=useAuthContext()\r\n    const login=(email,password)=>{\r\n        setError(null)\r\n        signInWithEmailAndPassword(auth,email,password).then((res)=>{\r\n            dispatch({type:'LOGIN', payload:res.user})\r\n        }).catch((err)=>{\r\n            setError(err.message)\r\n        })\r\n    }\r\n    return {error,login}\r\n}","import { useState } from 'react'\r\nimport { useSignup } from '../hooks/useSignup'\r\n\r\nexport default function Signup() {\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const {error,signup}=useSignup()\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    //console.log(email, password)\r\n    signup(email,password)\r\n  }\r\n  \r\n  return (\r\n    <div>\r\n      <h2>Signup</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <label>\r\n          <span>email:</span>\r\n          <input\r\n            required\r\n            type=\"email\"\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            value={email}\r\n          />\r\n        </label>\r\n        <label>\r\n          <span>password:</span>\r\n          <input\r\n            required\r\n            type=\"password\"\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            value={password}\r\n          />\r\n        </label>\r\n        <button>sign up</button>\r\n        {error && <p>{error}</p>}\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n","import { useState } from \"react\"\r\nimport {useAuthContext} from \"../hooks/useAuthContext\"\r\n//firebase imports\r\nimport {auth} from '../firebase/config'\r\nimport { createUserWithEmailAndPassword } from \"firebase/auth\"\r\n\r\nexport const useSignup=()=>{\r\n\r\n    const [error,setError]=useState(null)\r\n    const {dispatch}=useAuthContext()\r\n    const signup=(email,password)=>{\r\n        setError(null)\r\n        createUserWithEmailAndPassword(auth,email,password).then((res)=>{\r\n            dispatch({type:'LOGIN',payload:res.user})\r\n        }).catch((err)=>{\r\n            setError(err.message)\r\n        })\r\n    }\r\n    return {error,signup}\r\n}","import { BrowserRouter, Switch, Route, Redirect } from 'react-router-dom'\n\n// components\nimport Navbar from './components/Navbar'\nimport { useAuthContext } from './hooks/useAuthContext'\nimport Home from './pages/Home'\nimport Login from './pages/Login'\nimport Signup from './pages/Signup'\n\nfunction App() {\n  const {user, authIsReady}=useAuthContext()\n  return (\n    <div className=\"App\">\n      {authIsReady && (\n      <BrowserRouter>\n        <Navbar />\n        <Switch>\n          <Route exact path=\"/\">\n            {user && <Home />}\n            {!user && <Redirect to=\"/login\"/>}\n          </Route>\n          <Route path=\"/signup\">\n            {!user && <Signup />}\n            {user && <Redirect to=\"/\"/>}\n          </Route>\n          <Route path=\"/login\">\n            {!user && <Login />}\n            {user && <Redirect to=\"/\"/>}\n          </Route>\n        </Switch>\n      </BrowserRouter>\n      )}\n    </div>\n  );\n}\n\nexport default App\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { AuthContextProvider } from \"./context/AuthContext\";\nReactDOM.render(\n  <React.StrictMode>\n    <AuthContextProvider>\n      <App />\n    </AuthContextProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}